import"../chunks/DsnmJJEf.js";import{p as Y,c as q,f as c,a as d,d as s,s as n,t as P,b as i,n as r,r as o,e as S}from"../chunks/D3znixZ8.js";import{s as _}from"../chunks/DvjnN3xo.js";import{C as b}from"../chunks/DbQNJxrw.js";import{f as M}from"../chunks/EwJ0HlJQ.js";import{g as G}from"../chunks/Dtkcjqfd.js";import{T as K}from"../chunks/be_HaiW-.js";import{T as k,a as f}from"../chunks/B5S-4ePr.js";import{D as E}from"../chunks/CZF8XdJS.js";var Q=c(`<!> <p>1. Create <code>src/routes/library.gen.ts</code>:</p> <!> <p>2. Run <code>gro gen</code> to generate <code>src/routes/library.json</code> (or run the dev server,
			or build)</p> <p>3. Add plugin to <code>vite.config.ts</code>:</p> <!>`,1),V=c(`<!> <p>The plugin emits two files to <code>.well-known/</code>:</p> <ul><li><a><code> </code></a> - package metadata only, much
				smaller than <code>library.json</code> for lightweight usage</li> <li><a><code> </code></a> - full library metadata
				including <code>package.json</code>, modules, declarations, JSDoc, and type signatures</li></ul>`,1),X=c("<!> <p>By default, the plugin looks for <code>./src/routes/library.json</code>. Customize with the <code>library_path</code> option:</p> <!>",1),Z=c("Why <code>.well-known/</code>?",1),nn=c(`<!> <p>Writing to <code>.well-known/package.json</code> and <code>.well-known/library.json</code> extends <a href="https://en.wikipedia.org/wiki/Well-known_URI">Well-known URIs</a> (<a href="https://www.rfc-editor.org/rfc/rfc8615">RFC 8615</a>) for JS packages to provide conventional metadata for deployed websites. A popular example
			is how Mastodon uses WebFinger, which uses <code>.well-known/</code> for user identity discovery.</p> <p>SvelteKit outputs static files relative to the configured <code>base</code> path, so the <code>.well-known</code> directory may not be in the root <code>/</code>. This enables
			websites to provide metadata even when hosted in a namespaced path like <code>username.github.io/projectname/.well-known</code>. This breaks from the RFC but
			hopefully not in the bad-citizen kind of way; the alternative would be to ignore the standard
			and do something bespoke, which seems worse.</p> <p>Why publish this metadata to the web instead of relying on the git repo?</p> <ul><li>give all web users and tools access to discoverable package metadata</li> <li>metadata is a much lighter dependency than an entire repo</li> <li>some repos are deployed to multiple websites with metadata differences</li> <li>some repos like monorepos have multiple <code>package.json</code> files</li> <li>no dependency on git or the URL patterns of forge hosts like GitHub</li> <li>the git repo remains the source of truth, the build step gives control over the published
				artifacts</li></ul>`,1),an=c("<section><p><!> publishes metadata to <code>.well-known/</code> in your build output: <a><code>package.json</code></a> and <a><code>library.json</code></a>.</p> <p>Requires a generated <code>library.json</code> file, as created by <!> via <code>gro gen</code>.</p></section> <!> <!> <!> <!>",1);function kn(L,B){Y(B,!0);const D=G("vite_plugin_library_well_known"),g=M("/.well-known/package.json"),m=M("/.well-known/library.json");K(L,{get tome(){return D},children:(F,sn)=>{var $=an(),h=d($),w=s(h),j=s(w);E(j,{name:"vite_plugin_library_well_known"});var x=n(j,4),U=n(x,2);r(),o(w);var R=n(w,2),H=n(s(R),3);E(H,{name:"library_gen"}),r(3),o(R),o(h);var T=n(h,2);k(T,{children:(p,v)=>{var a=Q(),e=d(a);f(e,{text:"Setup"});var t=n(e,4);b(t,{lang:"ts",dangerous_raw_html:`<span class="token_special_keyword">import</span> <span class="token_punctuation">{</span>library_gen<span class="token_punctuation">}</span> <span class="token_special_keyword">from</span> <span class="token_string">'@fuzdev/fuz_ui/library_gen.js'</span><span class="token_punctuation">;</span>

<span class="token_special_keyword">export</span> <span class="token_keyword">const</span> gen <span class="token_operator">=</span> <span class="token_function">library_gen</span><span class="token_punctuation">(</span><span class="token_punctuation">)</span><span class="token_punctuation">;</span>`});var l=n(t,6);b(l,{lang:"ts",dangerous_raw_html:`<span class="token_special_keyword">import</span> <span class="token_punctuation">{</span>defineConfig<span class="token_punctuation">}</span> <span class="token_special_keyword">from</span> <span class="token_string">'vite'</span><span class="token_punctuation">;</span>
<span class="token_special_keyword">import</span> <span class="token_punctuation">{</span>sveltekit<span class="token_punctuation">}</span> <span class="token_special_keyword">from</span> <span class="token_string">'@sveltejs/kit/vite'</span><span class="token_punctuation">;</span>
<span class="token_special_keyword">import</span> <span class="token_punctuation">{</span>vite_plugin_library_well_known<span class="token_punctuation">}</span> <span class="token_special_keyword">from</span> <span class="token_string">'@fuzdev/fuz_ui/vite_plugin_library_well_known.js'</span><span class="token_punctuation">;</span>

<span class="token_special_keyword">export</span> <span class="token_special_keyword">default</span> <span class="token_function">defineConfig</span><span class="token_punctuation">(</span><span class="token_punctuation">{</span>
  plugins<span class="token_operator">:</span> <span class="token_punctuation">[</span><span class="token_function">sveltekit</span><span class="token_punctuation">(</span><span class="token_punctuation">)</span><span class="token_punctuation">,</span> <span class="token_function">vite_plugin_library_well_known</span><span class="token_punctuation">(</span><span class="token_punctuation">)</span><span class="token_punctuation">]</span><span class="token_punctuation">,</span>
<span class="token_punctuation">}</span><span class="token_punctuation">)</span><span class="token_punctuation">;</span>`}),i(p,a)},$$slots:{default:!0}});var C=n(T,2);k(C,{children:(p,v)=>{var a=V(),e=d(a);f(e,{text:"Output"});var t=n(e,4),l=s(t),u=s(l),z=s(u),N=s(z,!0);o(z),o(u),r(3),o(l);var A=n(l,2),y=s(A),I=s(y),O=s(I,!0);o(I),o(y),r(3),o(A),o(t),P(()=>{_(u,"href",g),S(N,g),_(y,"href",m),S(O,m)}),i(p,a)},$$slots:{default:!0}});var W=n(C,2);k(W,{children:(p,v)=>{var a=X(),e=d(a);f(e,{text:"Options"});var t=n(e,4);b(t,{lang:"ts",dangerous_raw_html:`<span class="token_function">vite_plugin_library_well_known</span><span class="token_punctuation">(</span><span class="token_punctuation">{</span>
  library_path<span class="token_operator">:</span> <span class="token_string">'./src/lib/library.json'</span><span class="token_punctuation">,</span>
<span class="token_punctuation">}</span><span class="token_punctuation">)</span>`}),i(p,a)},$$slots:{default:!0}});var J=n(W,2);k(J,{children:(p,v)=>{var a=nn(),e=d(a);f(e,{text:"Why `.well-known/`?",children:(t,l)=>{r();var u=Z();r(2),i(t,u)},$$slots:{default:!0}}),r(8),i(p,a)},$$slots:{default:!0}}),P(()=>{_(x,"href",g),_(U,"href",m)}),i(F,$)},$$slots:{default:!0}}),q()}export{kn as component};
