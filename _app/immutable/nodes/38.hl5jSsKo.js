import"../chunks/DsnmJJEf.js";import{p as Y,c as q,f as c,a as u,d as r,s as e,t as P,b as d,n as l,r as a,e as S}from"../chunks/D3znixZ8.js";import{s as _}from"../chunks/DvjnN3xo.js";import{C as k}from"../chunks/BgNuPRBO.js";import{f as M}from"../chunks/BY4u862n.js";import{g as G}from"../chunks/D1iq-6uI.js";import{T as K}from"../chunks/h9dMOKty.js";import{T as m,a as f}from"../chunks/DDVHqbp2.js";import{D as E}from"../chunks/DAxAeKm8.js";var Q=c(`<!> <p>1. Create <code>src/routes/library.gen.ts</code>:</p> <!> <p>2. Run <code>gro gen</code> to generate <code>src/routes/library.json</code> (or run the dev server,
			or build)</p> <p>3. Add plugin to <code>vite.config.ts</code>:</p> <!>`,1),V=c(`<!> <p>The plugin emits two files to <code>.well-known/</code>:</p> <ul><li><a><code> </code></a> - package metadata only, much
				smaller than <code>library.json</code> for lightweight usage</li> <li><a><code> </code></a> - full library metadata
				including <code>package.json</code>, modules, declarations, JSDoc, and type signatures</li></ul>`,1),X=c("<!> <p>By default, the plugin looks for <code>./src/routes/library.json</code>. Customize with the <code>library_path</code> option:</p> <!>",1),Z=c("Why <code>.well-known/</code>?",1),ee=c(`<!> <p>Writing to <code>.well-known/package.json</code> and <code>.well-known/library.json</code> extends <a href="https://en.wikipedia.org/wiki/Well-known_URI">Well-known URIs</a> (<a href="https://www.rfc-editor.org/rfc/rfc8615">RFC 8615</a>) for JS packages to provide conventional metadata for deployed websites. A popular example
			is how Mastodon uses WebFinger, which uses <code>.well-known/</code> for user identity discovery.</p> <p>SvelteKit outputs static files relative to the configured <code>base</code> path, so the <code>.well-known</code> directory may not be in the root <code>/</code>. This enables
			websites to provide metadata even when hosted in a namespaced path like <code>username.github.io/projectname/.well-known</code>. This breaks from the RFC but
			hopefully not in the bad-citizen kind of way; the alternative would be to ignore the standard
			and do something bespoke, which seems worse.</p> <p>Why publish this metadata to the web instead of relying on the git repo?</p> <ul><li>give all web users and tools access to discoverable package metadata</li> <li>metadata is a much lighter dependency than an entire repo</li> <li>some repos are deployed to multiple websites with metadata differences</li> <li>some repos like monorepos have multiple <code>package.json</code> files</li> <li>no dependency on git or the URL patterns of forge hosts like GitHub</li> <li>the git repo remains the source of truth, the build step gives control over the published
				artifacts</li></ul>`,1),oe=c("<section><p><!> publishes metadata to <code>.well-known/</code> in your build output: <a><code>package.json</code></a> and <a><code>library.json</code></a>.</p> <p>Requires a generated <code>library.json</code> file, as created by <!> via <code>gro gen</code>.</p></section> <!> <!> <!> <!>",1);function _e(L,B){Y(B,!0);const D=G("vite_plugin_library_well_known"),h=M("/.well-known/package.json"),g=M("/.well-known/library.json");K(L,{get tome(){return D},children:(F,re)=>{var $=oe(),v=u($),w=r(v),j=r(w);E(j,{name:"vite_plugin_library_well_known"});var x=e(j,4),U=e(x,2);l(),a(w);var R=e(w,2),H=e(r(R),3);E(H,{name:"library_gen"}),l(3),a(R),a(v);var T=e(v,2);m(T,{children:(i,b)=>{var o=Q(),t=u(o);f(t,{text:"Setup"});var n=e(t,4);k(n,{lang:"ts",content:`import {library_gen} from '@fuzdev/fuz_ui/library_gen.js';

export const gen = library_gen();`});var s=e(n,6);k(s,{lang:"ts",content:`import {defineConfig} from 'vite';
import {sveltekit} from '@sveltejs/kit/vite';
import {vite_plugin_library_well_known} from '@fuzdev/fuz_ui/vite_plugin_library_well_known.js';

export default defineConfig({
  plugins: [sveltekit(), vite_plugin_library_well_known()],
});`}),d(i,o)},$$slots:{default:!0}});var C=e(T,2);m(C,{children:(i,b)=>{var o=V(),t=u(o);f(t,{text:"Output"});var n=e(t,4),s=r(n),p=r(s),z=r(p),N=r(z,!0);a(z),a(p),l(3),a(s);var A=e(s,2),y=r(A),I=r(y),O=r(I,!0);a(I),a(y),l(3),a(A),a(n),P(()=>{_(p,"href",h),S(N,h),_(y,"href",g),S(O,g)}),d(i,o)},$$slots:{default:!0}});var W=e(C,2);m(W,{children:(i,b)=>{var o=X(),t=u(o);f(t,{text:"Options"});var n=e(t,4);k(n,{lang:"ts",content:`vite_plugin_library_well_known({
  library_path: './src/lib/library.json',
})`}),d(i,o)},$$slots:{default:!0}});var J=e(W,2);m(J,{children:(i,b)=>{var o=ee(),t=u(o);f(t,{text:"Why `.well-known/`?",children:(n,s)=>{l();var p=Z();l(2),d(n,p)},$$slots:{default:!0}}),l(8),d(i,o)},$$slots:{default:!0}}),P(()=>{_(x,"href",h),_(U,"href",g)}),d(F,$)},$$slots:{default:!0}}),q()}export{_e as component};
