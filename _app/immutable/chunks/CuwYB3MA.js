import"./DsnmJJEf.js";import{aj as q,p as B,ak as L,al as r,am as _,j as a,an as P,ao as F,f as G,d as f,s as H,r as m,t as J,b as k,g as K,a as M,h as Q,c as U}from"./OzM4W5qH.js";import{p as u,i as V}from"./CygWMb0n.js";import{f as W,a as X}from"./DE0RvWAe.js";import{b as O}from"./CXDtt1U1.js";import{s as Y,i as Z}from"./V2q5a4YM.js";import{w as $}from"./C2O4KJqs.js";import{T as ee}from"./BVkstFCs.js";var te=G('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-1ayz0dr"><div class="dialog_wrapper svelte-1ayz0dr" role="none"><div class="dialog_bg svelte-1ayz0dr" aria-hidden="true"></div> <div class="dialog_content svelte-1ayz0dr"><!></div></div></div></div>');function ce(T,s){B(s,!0);const C=u(s,"layout",3,"centered"),D=u(s,"index",3,0),I=u(s,"active",3,!0),h=u(s,"content_selector",3,".pane"),b="body",E="fuz_dialog";let n=_(void 0);L(()=>{R(s.container)});const R=e=>{if(e)r(n,e,!0);else{const i=document.getElementById(E);if(i)r(n,i,!0);else{const t=document.querySelector(b);if(!t)throw Error(`Cannot find dialog root element with selector '${b}'`);r(n,document.createElement("div"),!0),a(n).id=E,a(n).style.display="contents",t.appendChild(a(n))}}};let v=_(void 0),d=_(void 0);const p=e=>{e&&Y(e),s.onclose?.()},j=e=>{if(e.key==="Escape"&&!Z(e.target)){const i=a(v)?.parentElement,t=i?.parentElement?.children,c=Array.prototype.indexOf.call(t,i);(!t||c===t.length-1||c===-1)&&p(e)}};let y=_(!1);P("keydown",F,function(...e){(I()?j:void 0)?.apply(this,e)}),ee(T,{get to(){return a(n)},onmove:async()=>{await $(),r(y,!0),a(v)?.focus()},children:(e,i)=>{var t=te();let c,x;var z=f(t),g=f(z);g.__mousedown=o=>{const l=o.target;a(d)&&(a(d)===l||!a(d).contains(l)||h()&&!l.closest(h()))&&p(o)};var w=H(f(g),2),A=f(w);{var N=o=>{var l=K(),S=M(l);Q(S,()=>s.children,()=>p),k(o,l)};V(A,o=>{a(y)&&o(N)})}m(w),O(w,o=>r(d,o),()=>a(d)),m(g),m(z),m(t),O(t,o=>r(v,o),()=>a(v)),J(()=>{c=W(t,1,"dialog svelte-1ayz0dr",null,c,{ready:a(y),layout_page:C()==="page"}),x=X(t,"",x,{"z-index":100+D()})}),k(e,t)},$$slots:{default:!0}}),U()}q(["mousedown"]);export{ce as D};
