import"./DsnmJJEf.js";import{o as N}from"./Dj8FhZUx.js";import{p as C,f as y,h as j,b as m,c as A,d as p,r as u,j as _,u as T,a as H,s as O,g as P,i as Q,t as R,e as U}from"./D3znixZ8.js";import{r as D,i as V}from"./Dr3J8KvJ.js";import{e as W}from"./Bn11K0jC.js";import{b as E,g as X,C as Y}from"./DvjnN3xo.js";import{p as w}from"./B62x1arP.js";import{b as L,c as S,r as Z,d as $}from"./Ddjo_icZ.js";import{i as ee,H as te}from"./kitagt4c.js";const q=S(),x=S(()=>0),b=S();var se=y("<section><!></section>");function he(l,e){C(e,!0);const h=D(e,["$$slots","$$events","$$legacy","children"]),t=L.get(),n=x.get()+1;x.set(n);const i=b.get_maybe(),f=t.generate_section_id();b.set(f);let r;q.set(a=>(r=a,i));var s=se();E(s,()=>({...h}));var c=p(s);j(c,()=>e.children),u(s),X(s,()=>ee(()=>({intersecting:a})=>{r&&(a?t.fragments_onscreen.add(r):t.fragments_onscreen.delete(r))})),m(l,s),A()}var ae=y('<div class="flex:1"><!></div> <!>',1),re=y("<header><!></header>");function ge(l,e){C(e,!0);const h=D(e,["$$slots","$$events","$$legacy","text","tag","children"]),t=T(()=>$(e.text)),g=q.get();if(!g)throw Error("TomeSectionHeader must be a child of TomeSection");const n=L.get(),i=x.get(),f=T(()=>e.tag??(i===1?"h2":i===2?"h3":"h4")),r=b.get(),s=g(_(t));let c;w.url.pathname!==Z(n.root_path)&&(c=n.add(_(t),e.text,w.url.pathname,_(f),i,s,r)),N(()=>{c&&n.remove(c)});var a=re(),z=p(a);W(z,()=>_(f),!1,(B,F)=>{E(B,()=>({...h,[Y]:{tome_section_header:!0}}),void 0,void 0,void 0,"svelte-1asw5xe");var k=ae(),v=H(k),G=p(v);{var I=o=>{var d=P(),M=H(d);j(M,()=>e.children),m(o,d)},J=o=>{var d=Q();R(()=>U(d,e.text)),m(o,d)};V(G,o=>{e.children?o(I):o(J,!1)})}u(v);var K=O(v,2);te(K,{get fragment(){return _(t)}}),m(F,k)}),u(a),m(l,a),A()}export{he as T,ge as a};
